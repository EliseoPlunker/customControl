{"version":3,"file":"custom-lib.umd.js.map","sources":["ng://custom-lib/lib/custom-lib.service.ts","ng://custom-lib/lib/custom-lib.component.ts","ng://custom-lib/lib/check-box-group.component.ts","ng://custom-lib/lib/custom-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomLibService {\n\n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-custom-lib',\n  template: `\n    <p>\n      custom-lib works!\n    </p>\n  `,\n  styles: []\n})\nexport class CustomLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, Input, forwardRef,ElementRef } from '@angular/core';\r\nimport { ControlValueAccessor,  AbstractControl, ValidationErrors,NG_VALUE_ACCESSOR,NG_VALIDATORS } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'check-box-group',\r\n  template: `\r\n      <ng-container *ngFor=\"let item of source;let i=index;let last=last\">\r\n      <label *ngIf=\"customClass\" class=\"container\" [ngClass]=\"last?'last':''\">\r\n                <input id=\"{{_name+''+i}}\"\r\n             type=\"checkBox\" [ngModel]=\"_selectedItems[i]\"\r\n             (ngModelChange)=\"setValue($event,i)\" (focus)=\"_isFocused[i]=true\"(blur)=\"_isFocused[i]=false;onTouched()\">\r\n{{item[_col]}}\r\n          <span class=\"checkmark\" [ngClass]=\"_isFocused[i]?'focused':''\"></span>\r\n      </label>\r\n      <div  *ngIf=\"!customClass\" [ngClass]=\"last?'form-group':''\" class=\"form-check\" >\r\n         <input type=\"checkbox\" class=\"form-check-input\"  id=\"{{_name+''+i}}\"\r\n              [ngModel]=\"_selectedItems[i]\"\r\n             (ngModelChange)=\"setValue($event,i)\" (blur)=\"onTouched()\" >\r\n         <label class=\"form-check-label\" for=\"{{_name+''+i}}\">{{item[_col]}}</label>\r\n      </div>\r\n\r\n      </ng-container>\r\n  `,\r\n  host: {'[class]': '(customClass ? \" \" + customClass : \"\")', },\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => CheckBoxGroupComponent),\r\n      multi: true\r\n    },\r\n    {\r\n      provide: NG_VALIDATORS,\r\n      useExisting: forwardRef(() => CheckBoxGroupComponent),\r\n      multi: true,\r\n    }\r\n\r\n  ],\r\n  styles:[`\r\n    .focused {\r\n       outline: black dotted thin;\r\n    }`\r\n  ]\r\n})\r\nexport class CheckBoxGroupComponent implements ControlValueAccessor {\r\n\r\n  @Input() source;\r\n  @Input()\r\n  set cols(value:string){\r\n    let _cols=value.split(',')\r\n    this._key = _cols[0];\r\n    this._col = _cols[1]\r\n  }\r\n  @Input()customClass\r\n  _selectedItems: any[] = [];\r\n  _key: string;\r\n  _col: string;\r\n  _name:string=\"\";\r\n  _isString:boolean=false;\r\n  _isFocused:boolean[]=[];\r\n  _isRequired:boolean=false;\r\n  onChange;\r\n  onTouched;\r\n\r\n  constructor(el:ElementRef) { \r\n    let name=el.nativeElement.getAttribute('name');\r\n    this._isRequired=el.nativeElement.getAttribute('isRequired')!=null?true:false;\r\n    this._isString=el.nativeElement.getAttribute('isString')!=null?true:false;\r\n    this._name=name?name:\"ck\";\r\n    \r\n    }\r\n  writeValue(value: any[]|any): void {\r\n    this._selectedItems = this._isString?\r\n       this.propsToBoolean(value?value.split(','):\"\"):this.propsToBoolean(value);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n  }\r\n  setValue(value: boolean, index: number) {\r\n    this._selectedItems[index] = value;\r\n    this.onChange(this._isString?this.booleanToProps(this._selectedItems).join(','):this.booleanToProps(this._selectedItems));\r\n\r\n  }\r\n  focusOut()\r\n  {\r\n    this.onTouched()\r\n  }\r\n  validate(control: AbstractControl): ValidationErrors | null{\r\n    if (!this._isRequired)\r\n      return null;\r\n    if (!this._selectedItems.find(x=>x))\r\n      return {error:\"you must select one option at last\"}\r\n\r\n    return null\r\n  }\r\n\r\n  propsToBoolean(props): any[] {\r\n    let propsString=props?props.map(x=>''+x):null;\r\n    return props ? this.source.map((x: any) => propsString.indexOf(''+x[this._key]) >= 0)\r\n      : this.source.map(x => false);\r\n\r\n  }\r\n  booleanToProps(propsBoolean: boolean[]) {\r\n    let props: any[] = [];\r\n    if (propsBoolean) {\r\n      propsBoolean.forEach((item, index) => {\r\n        if (item)\r\n          props.push(this.source[index][this._key])\r\n      })\r\n    }\r\n    return props;\r\n\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport { CustomLibComponent } from './custom-lib.component';\nimport { CheckBoxGroupComponent } from './check-box-group.component';\n\n@NgModule({\n  declarations: [CustomLibComponent,CheckBoxGroupComponent],\n  imports: [ FormsModule,ReactiveFormsModule,BrowserModule\n  ],\n  exports: [CustomLibComponent,CheckBoxGroupComponent]\n})\nexport class CustomLibModule { }\n"],"names":["Injectable","Component","NG_VALUE_ACCESSOR","forwardRef","NG_VALIDATORS","ElementRef","Input","NgModule","FormsModule","ReactiveFormsModule","BrowserModule"],"mappings":"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"}
